spring:
  application:
    name: microwind.springboot4ddd

  profiles:
    active: dev

  # Spring Boot level
  logging:
    level:
      root: INFO
      org.springframework: DEBUG

    file:
      name: logs/app.log
      path: logs

  jackson:
    deserialization:
      fail-on-unknown-properties: true

  # MySQL - User database (Secondary)
  user:
    datasource:
      driver-class-name: com.mysql.cj.jdbc.Driver
      minimum-idle: 5
      maximum-pool-size: 20
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      auto-commit: true
      transaction-isolation: TRANSACTION_READ_COMMITTED
      connection-init-sql: SELECT 1
      pool-name: UserDB-Pool

  # PostgreSQL - order database (Third)
  order:
    datasource:
      driver-class-name: org.postgresql.Driver
      minimum-idle: 3
      maximum-pool-size: 10
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      auto-commit: true
      transaction-isolation: TRANSACTION_READ_COMMITTED
      connection-init-sql: SELECT 1
      pool-name: OrdersDB-Pool

  # Redis配置
  data:
    redis:
      host: localhost
      port: 6379
      database: 0
      timeout: 3000ms

# RocketMQ配置
rocketmq:
  name-server: localhost:9876
  producer:
    group: test-producer
    send-message-timeout: 3000  # 发送消息超时时间（毫秒）
    compress-message-body-threshold: 4096  # 消息体压缩阈值（字节）
    access-key: RocketMQ  # AccessKey（需要在 RocketMQ 中配置对应的 ACL）
    secret-key: 12345678  # SecretKey
  consumer:
    group: test-consumer  # 默认消费者组
    access-key: RocketMQ  # AccessKey
    secret-key: 12345678  # SecretKey

# 签名配置
sign:
  # 签名相关配置
  signature:
    ttl: 600000  # 签名有效期（毫秒），10分钟
    default-with-params: false  # 默认不使用参数签名
  # 是否允许缓存对象
  allow-cached-body: true
  # 需要缓存请求体的路径模式，此处为示例
  cached-body-path-patterns:
    - /api/orders/**
    - /api/payment/**

# 服务器配置
server:
  port: 8080

# 日志配置
logging:
  level:
    root: INFO
    com.github.microwind.springboot4ddd: DEBUG
